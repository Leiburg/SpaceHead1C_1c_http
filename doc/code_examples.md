# Примеры кода

[GET](#get)

[POST](#post)

## Методы выполнения HTTP-запросов

Все методы выполнения представлены в модуле `КлиентHTTPКлиентСервер`.

- `Получить` – GET
- `ПолучитьЗаголовки` – HEAD
- `ОтправитьТекст` – POST, тело содержит текст
- `ОтправитьДвоичныеДанные` – POST, тело содержит двоичные данные
- `ОтправитьФайл` – POST, тело содержит двоичные данные переданного по имени файла
- `ОтправитьДанныеФормы` – POST, тело содержит данные формата `multipart/form-data`
- `ЗаписатьТекст` – PUT, тело содержит текст
- `ЗаписатьДвоичныеДанные` – PUT, тело содержит двоичные данные
- `ЗаписатьФайл` – PUT, тело содержит двоичные данные переданного по имени файла
- `Удалить` – DELETE, допускается тело в виде текста

## Описание объекта HTTP-ответа

Методы выполнения возвращают фиксированную структуру со следующими полями:

- `КодСостояния` – Число – код состояния ответа
- `Заголовки` – Соответствие – заголовки ответа
- `Тело` – ДвоичныеДанные | Неопределено – содержимое тела ответа
- `ИмяФайлаТела` – Строка | Неопределено – имя файла с содержимым тела ответа

## GET

```bsl
Ответ = КлиентHTTPКлиентСервер.Получить("https://ya.ru");
```

```bsl
URI = "https://evilinsult.com/generate_insult.php";
ПЗ = КлиентHTTPКлиентСервер.НовыеПараметрыЗапроса();

// Добавим параметры URL: ?lang=ru&type=json
КлиентHTTPКлиентСервер
    .ДобавитьПараметр(ПЗ, "lang", "ru")
    .ДобавитьПараметр(ПЗ, "type", "json");

Ответ = КлиентHTTPКлиентСервер.Получить(URI, ПЗ);
Текст = ПолучитьСтрокуИзДвоичныхДанных(Ответ.Тело);
```

```bsl
// Пример сохранения тела ответа в файл
URI = "https://epic.gsfc.nasa.gov/archive/natural/2015/10/31/png/epic_1b_20151031074844.png";
ДП = КлиентHTTPКлиентСервер.НовыеДополнительныеПараметры();

КлиентHTTPКлиентСервер.УстановитьИмяВыходногоФайла(ДП, "С:\tmp\pic.png");

Ответ = КлиентHTTPКлиентСервер.Получить(URI, , ДП);
```

[вверх](#примеры-кода)

## POST

```bsl
URI = "https://jsonplaceholder.typicode.com/posts";
Данные = "{""title"": ""foo"", ""body"": ""bar"", ""userId"": 1}";

ДП = КлиентHTTPКлиентСервер.НовыеДополнительныеПараметры();

КлиентHTTPКлиентСервер
    .УстановитьТипMIME(ДП, КлиентHTTPПовтИсп.ТипMIMEJSON())
    .УстановитьКодировку(ДП, "UTF-16");

Ответ = КлиентHTTPКлиентСервер.ОтправитьТекст(URI, Данные, ДП);
Текст = ПолучитьСтрокуИзДвоичныхДанных(Ответ.Тело);
```

[вверх](#примеры-кода)
